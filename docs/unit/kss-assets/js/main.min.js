/**
 * @license
 *
 * @hidoo/kss-builder:
 * author: hidoo
 * version: 0.5.0
 */
!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||!e.className)throw new Error('Argument "element" is not valid.');return t&&t.length&&"function"==typeof t.join?(e.className=t.join("  "),t):String(e.className).split(/\s+/)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return-1!==r(e).indexOf(t)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r(e);n.push(t),r(e,n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r(e),i=[];n.forEach((function(e){t instanceof RegExp?t.test(e)||i.push(e):e!==t&&i.push(e)})),r(e,i)}var a=function(){function t(n){if(e(this,t),!n)throw new TypeError('Argument "element" is required.');this.prefix="kss-theme",this.element=n}return n(t,[{key:"validateType",value:function(e){var t=["theme","example-theme"];if("string"!=typeof e||-1===t.indexOf(e))throw new TypeError('Argument "type" must be one of '.concat(t.join(" or "),"."));return this}},{key:"toClassName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"theme",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.validateType(e),"string"!=typeof t||""===t)throw new TypeError('Argument "theme" is not valid string.');return"is-".concat(e,"-").concat(t)}},{key:"switch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"theme",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.validateType(e),"string"!=typeof t||""===t)throw new TypeError('Argument "theme" is not valid string.');var n=this.toClassName(e,t),r=new RegExp("^is-".concat(e,"-"));return i(this.element,n)||(s(this.element,r),o(this.element,n),window.localStorage.setItem("".concat(this.prefix,"-").concat(e),t)),this}},{key:"restore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"theme";this.validateType(e);var t=window.localStorage.getItem("".concat(this.prefix,"-").concat(e));return"string"==typeof t&&""!==t&&this.switch(e,t),this}}]),t}();function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new TypeError('Argument "element" is required.');if(!Element.prototype.matches){if("function"==typeof Element.prototype.msMatchesSelector)return e.msMatchesSelector(t);if("function"==typeof Element.prototype.webkitMatchesSelector)return e.webkitMatchesSelector(t)}return e.matches(t)}new(function(){function t(){if(e(this,t),this.element=document.querySelector(".kss-document"),!this.element)throw new Error('".kss-document" is not found.');this.theme=new a(this.element),this.enableDrawer(),this.enableThemeSwitcher(".js-kss-theme-switcher","theme"),this.enableThemeSwitcher(".js-kss-example-theme-switcher","example-theme"),this.enableExampleExpander(),this.enableSmoothScroll()}return n(t,[{key:"enableThemeSwitcher",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.theme.restore(n);var r=this.element.querySelector(t);if(!r)return this;var a="data-kss-switch-theme",c=Array.prototype.slice.call(r.querySelectorAll("[".concat(a,"]")));return c.forEach((function(t){var r=t.getAttribute(a),l=e.theme.toClassName(n,r);t.addEventListener("click",(function(i){e.theme.switch(n,r),c.forEach((function(e){return s(e,"is-current")})),o(t,"is-current"),i.preventDefault()})),i(e.element,l)&&o(t,"is-current")})),this}},{key:"enableDrawer",value:function(){var e=this.element.querySelector(".js-kss-styleguide-drawer");if(!e)return this;var t="ontouchstart"in window?"touchstart":"click",n="is-open",r=".js-kss-styleguide-drawer__drawer",a=".js-kss-styleguide-drawer__toggle";return e.addEventListener(t,(function(t){var l=t.target,h=c(l,"".concat(r,", ").concat(r," *")),u=c(l,"".concat(a,", ").concat(a," *")),m=i(e,n);m&&!h&&(s(e,n),t.preventDefault()),u&&(m?s(e,n):o(e,n),t.preventDefault())})),this}},{key:"enableExampleExpander",value:function(){var e=this,t=this.element.querySelector(".js-kss-example-expand");if(!t)return this;var n="is-expanded",r="kss-exmple-expand";return"expand"===window.localStorage.getItem(r)&&o(this.element,n),t.addEventListener("click",(function(t){i(e.element,n)?(s(e.element,n),window.localStorage.setItem(r,"")):(o(e.element,n),window.localStorage.setItem(r,"expand")),t.preventDefault()})),this}},{key:"enableSmoothScroll",value:function(){var e=".js-kss-smooth-scroll",t=document.querySelector("#js-kss-tool-bar");return this.element.addEventListener("click",(function(n){var r=n.target,i=r.hash;if(c(r,"".concat(e,", ").concat(e," *"))&&""!==i){var a=document.querySelector(i);if(a){var l=a.getBoundingClientRect().top,h=t?t.getBoundingClientRect().height:0,u=window.pageYOffset;window.scrollTo({top:l+u-35-h,left:0,behavior:"smooth"}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"is-current";Array.prototype.slice.call(document.querySelectorAll('[id^="kss-section-"].'.concat(e))).forEach((function(t){return s(t,e)}))}("is-current"),o(a,"is-current"),n.preventDefault()}}})),this}}]),t}())}();