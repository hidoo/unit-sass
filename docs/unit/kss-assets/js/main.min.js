/**
 * @license
 *
 * @hidoo/kss-builder:
 * author: hidoo
 * version: 0.4.1
 */
!function(){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){var n=1<arguments.length&&void 0!==t?t:[];if(!e||!e.className)throw new Error('Argument "element" is not valid.');return n&&n.length&&"function"==typeof n.join?(e.className=n.join("  "),n):String(e.className).split(/\s+/)}function l(e,t){var n=1<arguments.length&&void 0!==t?t:"";return-1!==o(e).indexOf(n)}function h(e,t){var n=1<arguments.length&&void 0!==t?t:"",r=o(e);r.push(n),o(e,r)}function u(e,t){var n=1<arguments.length&&void 0!==t?t:"",r=o(e),i=[];r.forEach(function(e){n instanceof RegExp?n.test(e)||i.push(e):e!==n&&i.push(e)}),o(e,i)}var t=function(){function t(e){if(n(this,t),!e)throw new TypeError('Argument "element" is required.');this.prefix="kss-theme",this.element=e}return i(t,[{key:"validateType",value:function(e){var t=["theme","example-theme"];if("string"!=typeof e||-1===t.indexOf(e))throw new TypeError('Argument "type" must be one of '.concat(t.join(" or "),"."));return this}},{key:"toClassName",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:"theme",r=1<arguments.length&&void 0!==t?t:"";if(this.validateType(n),"string"!=typeof r||""===r)throw new TypeError('Argument "theme" is not valid string.');return"is-".concat(n,"-").concat(r)}},{key:"switch",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:"theme",r=1<arguments.length&&void 0!==t?t:"";if(this.validateType(n),"string"!=typeof r||""===r)throw new TypeError('Argument "theme" is not valid string.');var i=this.toClassName(n,r),o=new RegExp("^is-".concat(n,"-"));return l(this.element,i)||(u(this.element,o),h(this.element,i),window.localStorage.setItem("".concat(this.prefix,"-").concat(n),r)),this}},{key:"restore",value:function(e){var t=0<arguments.length&&void 0!==e?e:"theme";this.validateType(t);var n=window.localStorage.getItem("".concat(this.prefix,"-").concat(t));return"string"==typeof n&&""!==n&&this.switch(t,n),this}}]),t}();function m(e,t){var n=1<arguments.length&&void 0!==t?t:"";if(!e)throw new TypeError('Argument "element" is required.');if(!Element.prototype.matches){if("function"==typeof Element.prototype.msMatchesSelector)return e.msMatchesSelector(n);if("function"==typeof Element.prototype.webkitMatchesSelector)return e.webkitMatchesSelector(n)}return e.matches(n)}new(function(){function e(){if(n(this,e),this.element=document.querySelector(".kss-document"),!this.element)throw new Error('".kss-document" is not found.');this.theme=new t(this.element),this.enableDrawer(),this.enableThemeSwitcher(".js-kss-theme-switcher","theme"),this.enableThemeSwitcher(".js-kss-example-theme-switcher","example-theme"),this.enableExampleExpander(),this.enableSmoothScroll()}return i(e,[{key:"enableThemeSwitcher",value:function(e,t){var r=this,n=0<arguments.length&&void 0!==e?e:"",i=1<arguments.length&&void 0!==t?t:"";this.theme.restore(i);var o=this.element.querySelector(n);if(!o)return this;var s="data-kss-switch-theme",a=Array.prototype.slice.call(o.querySelectorAll("[".concat(s,"]")));return a.forEach(function(t){var n=t.getAttribute(s),e=r.theme.toClassName(i,n);t.addEventListener("click",function(e){r.theme.switch(i,n),a.forEach(function(e){return u(e,"is-current")}),h(t,"is-current"),e.preventDefault()}),l(r.element,e)&&h(t,"is-current")}),this}},{key:"enableDrawer",value:function(){var o=this.element.querySelector(".js-kss-styleguide-drawer");if(!o)return this;var e="ontouchstart"in window?"touchstart":"click",s="is-open",a=".js-kss-styleguide-drawer__drawer",c=".js-kss-styleguide-drawer__toggle";return o.addEventListener(e,function(e){var t=e.target,n=m(t,"".concat(a,", ").concat(a," *")),r=m(t,"".concat(c,", ").concat(c," *")),i=l(o,s);i&&!n&&(u(o,s),e.preventDefault()),r&&((i?u:h)(o,s),e.preventDefault())}),this}},{key:"enableExampleExpander",value:function(){var t=this,e=this.element.querySelector(".js-kss-example-expand");if(!e)return this;var n="is-expanded",r="kss-exmple-expand";return"expand"===window.localStorage.getItem(r)&&h(this.element,n),e.addEventListener("click",function(e){l(t.element,n)?(u(t.element,n),window.localStorage.setItem(r,"")):(h(t.element,n),window.localStorage.setItem(r,"expand")),e.preventDefault()}),this}},{key:"enableSmoothScroll",value:function(){var a=".js-kss-smooth-scroll",c=document.querySelector("#js-kss-tool-bar");return this.element.addEventListener("click",function(e){var t=e.target,n=t.hash;if(m(t,"".concat(a,", ").concat(a," *"))&&""!==n){var r=document.querySelector(n);if(r){var i=r.getBoundingClientRect().top,o=c?c.getBoundingClientRect().height:0,s=window.pageYOffset;window.scrollTo({top:i+s-35-o,left:0,behavior:"smooth"}),function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"is-current";Array.prototype.slice.call(document.querySelectorAll('[id^="kss-section-"].'.concat(t))).forEach(function(e){return u(e,t)})}("is-current"),h(r,"is-current"),e.preventDefault()}}}),this}}]),e}())}();