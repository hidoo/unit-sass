////
/// (c) hidoo | MIT Lisence
/// @group spritesheets
////

/// define responsive item
/// @access private
/// @param {String} $name name of spritesheet item
/// @param {Map} $items [()] spritesheet items
/// @param {Map} $options [()] options
///
/// @require {mixin} define-breakpoint
/// @require {mixin} on-focus
/// @require {mixin} on-current
/// @require {mixin} on-disabled
/// @require {mixin} _use-spritesheet-set-properties
///
@mixin _use-spritesheet-define-responsive($name, $items: (), $options: ()) {
  @if not mixin-exists("define-breakpoint") {
    @error "@mixin _use-spritesheet-define-responsive: @mixin define-breakpoint is required.";
  }

  @if not mixin-exists("on-focus") {
    @error "@mixin _use-spritesheet-define-responsive: @mixin on-focus is required.";
  }

  @if not mixin-exists("on-current") {
    @error "@mixin _use-spritesheet-define-responsive: @mixin on-current is required.";
  }

  @if not mixin-exists("on-disabled") {
    @error "@mixin _use-spritesheet-define-responsive: @mixin on-disabled is required.";
  }

  @if not mixin-exists("_use-spritesheet-set-properties") {
    @error "@mixin _use-spritesheet-define-responsive: @mixin _use-spritesheet-set-properties is required.";
  }

  @if map-has-key($items, $name) {
    $up: map-get($items, $name);
    $focus: map-get($items, "#{$name}--focus");
    $current: map-get($items, "#{$name}--current");
    $disabled: map-get($items, "#{$name}--disabled");
    $up-if-mobile: map-get($items, "#{$name}--if-mobile");
    $focus-if-mobile: map-get($items, "#{$name}--focus--if-mobile");
    $current-if-mobile: map-get($items, "#{$name}--current--if-mobile");
    $disabled-if-mobile: map-get($items, "#{$name}--disabled--if-mobile");
    $use2x: map-get($options, "use2x");
    $capturing-selectors: map-get($options, "capturing-selectors");

    &-#{$name} {
      @content;

      @if $up {
        @include _use-spritesheet-set-properties(
          $values: $up,
          $use2x: $use2x == true
        );

        @if $up-if-mobile {
          @include define-breakpoint($until: "mobile") {
            @include _use-spritesheet-set-properties(
              $values: $up-if-mobile,
              $use2x: $use2x == true or $use2x == "if-mobile"
            );
          }
        }
      }

      @if $focus {
        @include on-focus($capturing-selectors: $capturing-selectors) {
          @include _use-spritesheet-set-properties(
            $values: (
              "offset-x": map-get($focus, "offset-x"),
              "offset-y": map-get($focus, "offset-y")
            ),
            $use2x: $use2x == true
          );
        }

        @if $focus-if-mobile {
          @include define-breakpoint($until: "mobile") {
            @include on-focus($capturing-selectors: $capturing-selectors) {
              @include _use-spritesheet-set-properties(
                $values: (
                  "offset-x": map-get($focus-if-mobile, "offset-x"),
                  "offset-y": map-get($focus-if-mobile, "offset-y")
                ),
                $use2x: $use2x == true or $use2x == "if-mobile"
              );
            }
          }
        }
      }

      @if $current {
        @include on-current($capturing-selectors: $capturing-selectors) {
          @include _use-spritesheet-set-properties(
            $values: (
              "offset-x": map-get($current, "offset-x"),
              "offset-y": map-get($current, "offset-y")
            ),
            $use2x: $use2x == true
          );
        }

        @if $current-if-mobile {
          @include define-breakpoint($until: "mobile") {
            @include on-current($capturing-selectors: $capturing-selectors) {
              @include _use-spritesheet-set-properties(
                $values: (
                  "offset-x": map-get($current-if-mobile, "offset-x"),
                  "offset-y": map-get($current-if-mobile, "offset-y")
                ),
                $use2x: $use2x == true or $use2x == "if-mobile"
              );
            }
          }
        }
      }

      @if $disabled {
        @include on-disabled($capturing-selectors: $capturing-selectors) {
          @include _use-spritesheet-set-properties(
            $values: (
              "offset-x": map-get($disabled, "offset-x"),
              "offset-y": map-get($disabled, "offset-y")
            ),
            $use2x: $use2x == true
          );
        }

        @if $disabled-if-mobile {
          @include define-breakpoint($until: "mobile") {
            @include on-disabled($capturing-selectors: $capturing-selectors) {
              @include _use-spritesheet-set-properties(
                $values: (
                  "offset-x": map-get($disabled-if-mobile, "offset-x"),
                  "offset-y": map-get($disabled-if-mobile, "offset-y")
                ),
                $use2x: $use2x == true or $use2x == "if-mobile"
              );
            }
          }
        }
      }
    }
  }
  @else {
    @warn "@mixin _use-spritesheet-define-responsive: Spritesheet '#{$name}' was not generate, because $name: '#{$name}' is not found.";
  }
}
